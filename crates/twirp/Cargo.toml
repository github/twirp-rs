[package]
name = "twirp"
version = "0.1.0"
authors = ["The blackbird team <support@github.com>"]
edition = "2021"

[features]
default = ["client", "server", "test-support"]
test-support = ["dep:async-trait", "dep:tokio"]
client = ["dep:reqwest", "dep:url"]
server = ["dep:hyper"]

[dependencies]
futures = "0.3"
prost = "0.12"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
thiserror = "1.0"

# For the client feature
reqwest = { version = "0.11", features = ["default", "gzip", "json"], optional = true }
url = { version = "2.5", optional = true }

# For the server feature
bytes = "1.5"
http-body-util = "0.1"
hyper = { version = "1.1", features = ["full"], optional = true }
hyper-util = { version = "0.1", features = ["tokio"] }
pin-project-lite = "0.2"

# For the test-support feature
async-trait = { version = "0.1", optional = true }
tokio = { version = "1.33", features = [], optional = true }

[dev-dependencies]
tokio = { version = "1.33", features = ["rt", "macros"] }
